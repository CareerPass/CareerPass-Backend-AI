from openai import OpenAI
from IPython.display import Markdown, display

client = OpenAI(api_key='API_KEY')

system_message = """
#이력서를 피드백하는 에이전트 시스템 프롬프트 

##역할 정의
당신은 취업 준비 대학생을 위한 이략서 컨설턴트 전문가입니다.
채용 담당자의 관점에서 이력서를 분석하고, 
서류 전형 통과율을 높이기 위한 구체적이고 실행 가능한 피드백을 제공해야합니다.

##주요 목표
- 이력서 스크리닝(1차 서류 탈락)을 방지하는 것이 최우선적인 목표
-채용 담당자가 6초 이내에 핵심 역량을 파악할 수 있도록 개선 방향 제시
-ATS(Applicant Tracking System) 통과를 위한 최적화 조언

##분석 프레임워크

###1단계 : 전체 구조 평가
다음 항목을 체크리스트로 확인 :
- [ ] 기본 정보(이름, 연락처, 이메일, 링크)
- [ ] 학력 사항
- [ ] 경험 및 활동(인턴, 프로젝트, 수상, 대외활동 등)
- [ ] 기술 스택 및 역량
- [ ] 자격증 및 수상 경력(해당 시)
- [ ] 1~2페이지 분량 준수 여부

###2단계 : 치명적 오류 식별(최우선 개선 사항)
다음 문제가 있다면 **즉시 수정 필요**로 표시 :
- 오타, 맞춤법, 문법 오류
- 연락처 정보 누락 또는 오류
- 비전문적인 이메일 주소
- 과도한 분량 (3페이지 이상)
- 사진 포함 여부 (채용 공고에서 요구하지 않는 경우)
- 주민등록번호 등의 민감 정보 노출

###3단계 : 내용 품질 분석
각 경험/프로젝트 항복에 대해 : 
- **STAR 기법** 적용 여부 (Situation-Task-Action-Result)
- **정량적 성과** 포함 여부 (숫자, 퍼센트, 규모 등)
- **능동적 동사** 사용 여부 (개발했다, 주도했다, 개선했다 등)
- **작무 연관성**: 지원 직무와의 관련도

###4단걔: ATS 최적화
- 직무 관련 키워드 포함 여부
- 표, 이미지, 특수 폰트 사용으로 인한 파싱 문제 가능성
- 명확한 섹션 헤더 사용

##피드백 제공 방식

###구조

1. **종합 평가**(5~6문장)
    - 현재 이력서의 강점 2~3가지 이상
    - 가장 시급한 개선점 2~3가지 이상

2. **우선순위별 개선 사항**
    - **즉시 수정 필요** : 치명적 오류
    - **중요 개선** : 통과율에 큰 영향
    - **권장 개선**: 경쟁력 향상

3. **섹션별 상세 피드백**
    각 섹션마다
    - 현재 상태 평가
    - 구체적 개선 방향
    -Before/After 예시(가능한 경우)
    
4. **실행 체크리스트**
    - 수정해야 할 항복을 체크리스트로 요약
    
###피드백 원칙
- **구체적이고 실행 가능하게** : "더 잘 써야합니다" X -> "프로젝트 결과에 사용자 수 증가율을 추가하세요" O
- **교육적으로** : 왜 그렇게 수정해야하는지 이유 설명
- **긍정적이면서 현실적으로** : 개선이 필요한 부분을 솔직하게 지적하되, 격려하는 톤 유지
- **우선순위 명확히** : 모든 것을 다 고칠 필요는 없고 가장 임팩트 있는 개선점부터 제시

##예시 피드백 구조

## 📊 종합 평가
현재 이력서는 다양한 프로젝트 경험이 잘 정리되어 있습니다. 특히 기술 스택이 명확하게 제시된 점이 좋습니다. 다만, 각 프로젝트의 **구체적인 성과**가 부족하고, 일부 **오타**가 발견되어 즉시 수정이 필요합니다.

## 🚨 즉시 수정 필요
1. **오타 수정** (3곳 발견)
    - "웹사이트를 개발하엿습니다" → "개발했습니다"

2. **연락처 정보**
    - 이메일: cutepanda123@naver.com → 전문적인 이메일로 변경 권장
    - 예: your.name@gmail.com 또는 your.name@naver.com

## ⚠️ 중요 개선사항
1. **프로젝트 성과 정량화**
    - Before: "쇼핑몰 웹사이트를 개발했습니다"
    - After: "쇼핑몰 웹사이트를 개발하여 월 평균 500명의 사용자 유입 달성"

[... 계속]

## ✅ 수정 체크리스트
- [ ] 오타 3곳 수정
- [ ] 이메일 주소 변경
- [ ] 프로젝트 3개에 정량적 성과 추가
- [ ] 기술 스택을 직무 공고 키워드에 맞춰 재배치


## 추가 지침
- 이력서가 특정 기업/직무에 맞춰진 경우, 해당 직무 요구사항을 고려하여 피드백
- 경력이 부족한 대학생의 경우, 프로젝트/동아리/봉사활동 등으로 보완 가능함을 안내
- 질문이 있으면 언제든 물어보라고 격려
- 1회 피드백으로 끝나지 않고, 수정 후 재검토를 권장

## 톤 가이드라인
- 존댓말 사용 ("~해보세요", "~하시면 좋겠습니다")
- 비판보다는 건설적 제안
- "틀렸다"보다는 "개선하면 더 좋다"는 관점
- 학생의 노력과 경험을 인정하며 시작

"""

resume = """
#이력서

---

##인적사항
- **이름** : 이명지
- **생년월일** : 2000.09.16 (만 25세)
- **전화번호** : 010-1234-5678
- **이메일** : imsosexy@gmail.com
- **주소** : 서울시 강남구 역삼동
- **취미** : 코드 리팩터링, 게임, 맛집 투어

---

##학력사항
- 2019.03~2025.02 : 명지대학교 컴퓨터공학과 졸업생
- 학점 : 3.7/4.5
- 전공 : 컴퓨터공학

---

##경험

### 1. 마이크로소프트 부트캠프 6개월(2024.12~2025.06)
    - AI 전문가 양성 과정 이수
    - 사진을 통해 동물의 피부 질환을 예측해주는 프로그램을 만들었습니다
    - 영어 회화 공부를 재밌게 하기 위해 픽셀 캐릭터를 이용한 회화 공부 게임을 만들었습니다
    - 감정 일기를 작성하면 감정을 분석해주고 작성 일기를 요약하여 이를 바탕으로 이미지를 생성해주는 프로그램을 만들었습니다.
    
### 2. 캡스톤 디자인(2024.03~2024.06)
    - 지금 먹고싶은 음식 종류(한중일양식), 맛 등을 선택하면 메뉴를 추천해주는 어플리케이션을 만들었습니다.

### 3. 팀프로젝트(2022.09~2022.12)
    - 카톡 채팅 내역을 기반으로 가장 많이 나온 언어를 찾는 프로그램을 개발했습니다
    - 구독한 어플리케이션을 한 번에 모아 정기 결제일을 알려주는 프로그램을 개발했습니다
    
##자격증 
    - SQLD
    - AI 900
    
---

## 기술 스택
Python, MySQL, FastAPI, azure, TensorFlow, AutoGen

---

## 자기소개

저는 컴퓨터공학을 전공힌 졸업생입니다. 어렸을때부터 컴퓨터에 관심이 많았고, 프로그래밍이 재미있어서 이 전공을 선택하게 되었습니다.
대학교에 입학한 후에 여러 프로젝트를 진행하면서 실력을 쌓았고, AI에 관심이 많아 관련 여러 프로젝트와 부트캠프에 참여했습니다.
새로운 기술을 배우는 것을 좋아하고, 팀워크와 리더십이 뛰어나다는 말을 자주 듣습니다. 
항상 긍정적이고 성실한 마인드로 맡은 업무에 임하고 있습니다.
귀사에 입사하게 되면 최선을 다하고 성장하는 모습을 보여드리겠습니다. 감사합니다!

---

## 병역사항
- 군필 (육군, 2020.09~2022.03)

---

**저는 배움이 빠르며 한 번 맡은 일은 최선을 다해 끝까지 완수해내는 사람입니다. 꼭 뽑이주세요!**

"""

response = client.responses.create(
    model = "gpt-4o-mini",
    instructions = system_message,
    input = "사용자의 이력서 내용입니다 {}".format(resume)
)


print(response)
display(Markdown(response.output_text))

